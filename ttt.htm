<!DOCTYPE html>
<html>
<head>
</head>
<body onload="clear()">

<h1> Advanced Tic-Tac-Toe </h1>


<style>
    table {
        border-collapse: collapse;
        }
    tr.bot{
        border-bottom:solid;
    }
    th.lef{
        border-left:solid;
    }
    button{
        height:35px;
        width:35px;
    }
    button.final{
        height:auto;
        width:auto;
    }
</style>



<table>

<tr>
<th><button id="11" onclick="hit(0,0)"></button></th><th><button id = "12" onclick="hit(0,1)"></button></th><th><button id = "13" onclick="hit(0,2)"></button></th><th class ="lef"><button id = "14" onclick="hit(0,3)"></button></th><th><button id = "15"  onclick="hit(0,4)"></button></th><th><button id = "16" onclick="hit(0,5)"></button></th><th class ="lef"><button id = "17" onclick="hit(0,6)"></button></th><th><button id = "18" onclick="hit(0,7)"></button></th><th><button id = "19" onclick="hit(0,8)"></button></th>
</tr>

<tr>
    <th><button id="21" onclick="hit(1,0)"></button></th><th><button id = "22" onclick="hit(1,1)"></button></th><th><button id = "23" onclick="hit(1,2)"></button></th><th class ="lef"><button id = "24" onclick="hit(1,3)"></button></th><th><button id = "25"  onclick="hit(1,4)"></button></th><th><button id = "26" onclick="hit(1,5)"></button></th><th class ="lef"><button id = "27" onclick="hit(1,6)"></button></th><th><button id = "28" onclick="hit(1,7)"></button></th><th><button id = "29" onclick="hit(1,8)"></button></th>
</tr>

<tr class = "bot">
    <th><button id="31" onclick="hit(2,0)"></button></th><th><button id = "32" onclick="hit(2,1)"></button></th><th><button id = "33" onclick="hit(2,2)"></button></th><th class ="lef"><button id = "34" onclick="hit(2,3)"></button></th><th><button id = "35"  onclick="hit(2,4)"></button></th><th><button id = "36" onclick="hit(2,5)"></button></th><th class ="lef"><button id = "37" onclick="hit(2,6)"></button></th><th><button id = "38" onclick="hit(2,7)"></button></th><th><button id = "39" onclick="hit(2,8)"></button></th>
</tr>

<tr>
    <th><button id="41" onclick="hit(3,0)"></button></th><th><button id = "42" onclick="hit(3,1)"></button></th><th><button id = "43" onclick="hit(3,2)"></button></th><th class ="lef"><button id = "44" onclick="hit(3,3)"></button></th><th><button id = "45"  onclick="hit(3,4)"></button></th><th><button id = "46" onclick="hit(3,5)"></button></th><th class ="lef"><button id = "47" onclick="hit(3,6)"></button></th><th><button id = "48" onclick="hit(3,7)"></button></th><th><button id = "49" onclick="hit(3,8)"></button></th>
</tr>

<tr>
    <th><button id="51" onclick="hit(4,0)"></button></th><th><button id = "52" onclick="hit(4,1)"></button></th><th><button id = "53" onclick="hit(4,2)"></button></th><th class ="lef"><button id = "54" onclick="hit(4,3)"></button></th><th><button id = "55"  onclick="hit(4,4)"></button></th><th><button id = "56" onclick="hit(4,5)"></button></th><th class ="lef"><button id = "57" onclick="hit(4,6)"></button></th><th><button id = "58" onclick="hit(4,7)"></button></th><th><button id = "59" onclick="hit(4,8)"></button></th>
</tr>

<tr class = "bot">
    <th><button id="61" onclick="hit(5,0)"></button></th><th><button id = "62" onclick="hit(5,1)"></button></th><th><button id = "63" onclick="hit(5,2)"></button></th><th class ="lef"><button id = "64" onclick="hit(5,3)"></button></th><th><button id = "65"  onclick="hit(5,4)"></button></th><th><button id = "66" onclick="hit(5,5)"></button></th><th class ="lef"><button id = "67" onclick="hit(5,6)"></button></th><th><button id = "68" onclick="hit(5,7)"></button></th><th><button id = "69" onclick="hit(5,8)"></button></th>
</tr>

<tr>
    <th><button id="71" onclick="hit(6,0)"></button></th><th><button id = "72" onclick="hit(6,1)"></button></th><th><button id = "73" onclick="hit(6,2)"></button></th><th class ="lef"><button id = "74" onclick="hit(6,3)"></button></th><th><button id = "75"  onclick="hit(6,4)"></button></th><th><button id = "76" onclick="hit(6,5)"></button></th><th class ="lef"><button id = "77" onclick="hit(6,6)"></button></th><th><button id = "78" onclick="hit(6,7)"></button></th><th><button id = "79" onclick="hit(6,8)"></button></th>
</tr>

<tr>
    <th><button id="81" onclick="hit(7,0)"></button></th><th><button id = "82" onclick="hit(7,1)"></button></th><th><button id = "83" onclick="hit(7,2)"></button></th><th class ="lef"><button id = "84" onclick="hit(7,3)"></button></th><th><button id = "85"  onclick="hit(7,4)"></button></th><th><button id = "86" onclick="hit(7,5)"></button></th><th class ="lef"><button id = "87" onclick="hit(7,6)"></button></th><th><button id = "88" onclick="hit(7,7)"></button></th><th><button id = "89" onclick="hit(7,8)"></button></th>
</tr>

<tr>
    <th><button id="91" onclick="hit(8,0)"></button></th><th><button id = "92" onclick="hit(8,1)"></button></th><th><button id = "93" onclick="hit(8,2)"></button></th><th class ="lef"><button id = "94" onclick="hit(8,3)"></button></th><th><button id = "95"  onclick="hit(8,4)"></button></th><th><button id = "96" onclick="hit(8,5)"></button></th><th class ="lef"><button id = "97" onclick="hit(8,6)"></button></th><th><button id = "98" onclick="hit(8,7)"></button></th><th><button id = "99" onclick="hit(8,8)"></button></th>
</tr>

</table>

<h2 id = "test"> Have Fun!</h2>

<script> 

var board = [
    ["_","_","_","_","_","_","_","_","_"],
    ["_","_","_","_","_","_","_","_","_"],
    ["_","_","_","_","_","_","_","_","_"],
    ["_","_","_","_","_","_","_","_","_"],
    ["_","_","_","_","_","_","_","_","_"],
    ["_","_","_","_","_","_","_","_","_"],
    ["_","_","_","_","_","_","_","_","_"],
    ["_","_","_","_","_","_","_","_","_"],
    ["_","_","_","_","_","_","_","_","_"],
             ];
             
var bBoard = ["_","_","_","_","_","_","_","_","_"];
var fBoard = [0,0,0,0,0,0,0,0,0];
             
update();



var turn = 1;
var block;
var win = 0;



function hit(r,c) {
    var p;
    if((board[r][c] !== "X") && (board[r][c] !== "O")){
        if(cBlock(r,c,block) || turn == 1 || fBoard[block-1] == 1)
        {
            
            
            
            if (turn%2 == 1)
            {
                board[r][c] = "X";
                p = "X";
            }else{
                board[r][c] = "O";
                p = "O";
            }
            
            
            
            
            if (cWin(where(r,c),p) && bBoard[where(r,c)-1] == "_"){
                bBoard[where(r,c)-1] = p;
                document.getElementById("test").innerHTML = p+" took over block "+where(r,c);
                
                if(p == "X"){
                    fill(where(r,c),"#ffff99");
                } else{
                    fill(where(r,c),"#99ccff");
                    
                }
                
                
                
                if(cBigWin(p)){
                    document.getElementById("test").innerHTML = p +" won";
                    board = [
                             [p,p,p,p,p,p,p,p,p],
                             [p,p,p,p,p,p,p,p,p],
                             [p,p,p,p,p,p,p,p,p],
                             [p,p,p,p,p,p,p,p,p],
                             [p,p,p,p,p,p,p,p,p],
                             [p,p,p,p,p,p,p,p,p],
                             [p,p,p,p,p,p,p,p,p],
                             [p,p,p,p,p,p,p,p,p],
                             [p,p,p,p,p,p,p,p,p],
                            ];
                    win = 1;
                }
            }
            
            
            if(cFull(where(r,c))){
                fBoard[where(r,c)-1] = 1;
            }
            
            
            turn++;
            block = assign(r,c);
            update();
            mark();
            if(win ==0 && fBoard[block-1] == 1){
                for (var i =0; i<9; i++){
                    if (fBoard[i] == 0){
                        fill (i+1, "#66ff66");
                    }
                    
                }
            } else if(win == 0){
                fill(block,"#66ff66");
            }
            
            /*if (tie()){
                document.getElementById("test") = "It's a tie";
            }*/
            //the tie function isn't working right now.
        }
    }
}

/*function tie (){
    var count =0;
    for (var i =0; i<9; i++){
        if(fBoard[i] !== 0){
            count ++;
        }
    }
    if (count == 9){
        return true;
    } else{
        return false;
    }
}*/
//the tie function isn't working right now


function cFull(b){
    var count = 0;
    if (b == 1){
        for (var i =0; i<3; i++){
            for (var j =0; j<3; j++){
                if(board[i][j] !== "_"){
                   count++;
                }
            }
        }
    } else if (b==2){
        for (var i = 0; i<3; i++){
            for (var j=3; j<6; j++){
                if(board[i][j] !== "_"){
                    count++;
                }
            }
        }
    } else if (b==3){
        for (var i = 0; i<3; i++){
            for (var j=6; j<9; j++){
                if(board[i][j] !== "_"){
                    count++;
                }
            }
        }
    } else if (b==4){
        for (var i = 3; i<6; i++){
            for (var j=0; j<3; j++){
                if(board[i][j] !== "_"){
                    count++;
                }
            }
        }
    } else if (b==5){
        for (var i = 3; i<6; i++){
            for (var j=3; j<6; j++){
                if(board[i][j] !== "_"){
                    count++;
                }
            }
        }
    } else if (b==6){
        for (var i = 3; i<6; i++){
            for (var j=6; j<9; j++){
                if(board[i][j] !== "_"){
                    count++;
                }
            }
        }
    } else if (b==7){
        for (var i = 6; i<9; i++){
            for (var j=0; j<3; j++){
                if(board[i][j] !== "_"){
                    count++;
                }
            }
        }
    } else if (b==8){
        for (var i = 6; i<9; i++){
            for (var j=3; j<6; j++){
                if(board[i][j] !== "_"){
                    count++;
                }
            }
        }
    } else if (b==9){
        for (var i = 6; i<9; i++){
            for (var j=6; j<9; j++){
                if(board[i][j] !== "_"){
                    count++;
                }
            }
        }
    }
    
    
    if(count == 9){
        return true;
    }else{
        return false;
    }
}



function reset(){
    
    fBoard = [0,0,0,0,0,0,0,0,0];
    board = [
                 ["_","_","_","_","_","_","_","_","_"],
                 ["_","_","_","_","_","_","_","_","_"],
                 ["_","_","_","_","_","_","_","_","_"],
                 ["_","_","_","_","_","_","_","_","_"],
                 ["_","_","_","_","_","_","_","_","_"],
                 ["_","_","_","_","_","_","_","_","_"],
                 ["_","_","_","_","_","_","_","_","_"],
                 ["_","_","_","_","_","_","_","_","_"],
                 ["_","_","_","_","_","_","_","_","_"],
                 ];
                 
                 bBoard = ["_","_","_","_","_","_","_","_","_"];
                 
                 update();
                 
                 clear();
                 
                 turn = 1;
                 block;
                 win = 0;
                 document.getElementById("test").innerHTML = "Have Fun!";
}

function mark(){
    
    for(var i = 0; i<9; i++){
        if (bBoard[i] == "_"){
            fill(i+1,"#ffffff");
        } else if (bBoard[i]== "X"){
            fill(i+1,"#ffff99");
        } else if (bBoard[i] == "O"){
            fill(i+1,"#99ccff");
        }
    
    }
}

function cBigWin (p){
   if (  (bBoard[0] == p) && (bBoard[1] == p) && (bBoard[2] == p) )
   {
       return true;
   }
   if (  (bBoard[0] == p) && (bBoard[4] == p) && (bBoard[8] == p) )
   {
       return true;
   }
   if (  (bBoard[0] == p) && (bBoard[3] == p) && (bBoard[6] == p) )
   {
       return true;
   }
   if (  (bBoard[1] == p) && (bBoard[4] == p) && (bBoard[7] == p) )
   {
       return true;
   }
   if (  (bBoard[3] == p) && (bBoard[4] == p) && (bBoard[5] == p) )
   {
       return true;
   }
   if (  (bBoard[6] == p) && (bBoard[7] == p) && (bBoard[8] == p) )
   {
       return true;
   }
   if (  (bBoard[2] == p) && (bBoard[4] == p) && (bBoard[6] == p) )
   {
       return true;
   }
   if (  (bBoard[2] == p) && (bBoard[5] == p) && (bBoard[8] == p) )
   {
       return true;
   }
}

function where(r,c){
    
    if (  ((r==0) || (r==1) || (r==2)) && ((c==0) || (c==1) || (c==2))   )
    {
        return 1;
    }
    if (  ((r==0) || (r==1) || (r==2)) && ((c==3) || (c==4) || (c==5))   )
    {
        return 2;
    }
    if (  ((r==0) || (r==1) || (r==2)) && ((c==6) || (c==7) || (c==8))   )
    {
        return 3;
    }
    if (  ((r==4) || (r==5) || (r==3)) && ((c==0) || (c==1) || (c==2))   )
    {
        return 4;
    }
    if (  ((r==4) || (r==5) || (r==3)) && ((c==3) || (c==4) || (c==5))   )
    {
        return 5;
    }
    if (  ((r==4) || (r==5) || (r==3)) && ((c==6) || (c==7) || (c==8))   )
    {
        return 6;
    }
    if (  ((r==7) || (r==8) || (r==6)) && ((c==0) || (c==1) || (c==2))   )
    {
        return 7;
    }
    if (  ((r==6) || (r==7) || (r==8)) && ((c==3) || (c==4) || (c==5))   )
    {
        return 8;
    }
    if (  ((r==6) || (r==7) || (r==8)) && ((c==6) || (c==7) || (c==8))   )
    {
        return 9;
    }

    
}//find block placed

/*
 function doneSpec(r,b,p){
    var nb = (b-1)*3;
    var nbr = (r-1)*3;
    board[0+nbr][0+nb] = p;
    board[1+nbr][0+nb] = p;
    board[1+nbr][1+nb] = p;
    board[1+nbr][2+nb] = p;
    board[0+nbr][1+nb] = p;
    board[0+nbr][2+nb] = p;
    board[2+nbr][0+nb] = p;
    board[2+nbr][1+nb] = p;
    board[2+nbr][2+nb] = p;
    
}

function done(b,p){
    if ( b>0 && b<4){
        doneSpec(1,b,p);
    }
    if (b>3 && b<7){
        doneSpec(2,b-3,p);
    }
    if (b>6 && b<10){
        doneSpec(3,b-6,p);
    }
    
} //fill with XO
 */

function cWin(b,p) {
    if ( b>0 && b<4){
        return spec(1,b,p);
    }
    if (b>3 && b<7){
        return spec(2,b-3,p);
    }
    if (b>6 && b<10){
        return spec(3,b-6,p);
    }
} // checks win

function spec(r,b,p) {
    var nb = (b-1)*3;
    var nbr = (r-1)*3;
    
    if (board[0+nbr][0+nb] == p){
        if (board[0+nbr][1+nb] == p && board[0+nbr][2+nb] == p){
            return true;
        }
        if (board[1+nbr][0+nb] == p && board[2+nbr][0+nb] == p){
            return true;
        }
        if (board[1+nbr][1+nb] == p && board[2+nbr][2+nb] == p){
            return true;
        }
    }
    if (board[2+nbr][2+nb] == p){
        if (board[1+nbr][2+nb] == p && board[0+nbr][2+nb] == p){
            return true;
        }
        if (board[2+nbr][1+nb] == p && board[2+nbr][0+nb] == p){
            return true;
        }
    }
    if ((board[0+nbr][1+nb] == p) && (board[1+nbr][1+nb] == p) && (board[2+nbr][1+nb] == p)){
        return true;
    }
    if ((board[1+nbr][0+nb] == p) && (board[1+nbr][1+nb] == p) && (board[1+nbr][2+nb] == p)){
        return true;
    }
    if ((board[2+nbr][0+nb] == p) && (board[2+nbr][1+nb] == p) && (board[2+nbr][2+nb] == p)){
        return true;
    }
} //checks win detailed

function clear(){
    for(var i=10; i<100; i++){
        if(!(i%10 == 0)){
            var temp = (i.toString()).split("");
            document.getElementById(i).style.background = "#ffffff";
            
        }
    }

} //every tile is white


function fill(b,color){
    for(var i=11; i<100; i++){
        if(!(i%10 == 0)){
            var temp = (i.toString()).split("");
            if (b==1){
                if ((temp[0] == 1 || temp[0] == 2 || temp[0] == 3) && (temp[1] == 1 || temp[1] == 2 || temp[1] == 3)){
                   document.getElementById(i).style.background = color;
                }
            } else if (b == 2) {
                if ((temp[0] == 1 || temp[0] == 2 || temp[0] == 3) && (temp[1] == 4 || temp[1] == 5 || temp[1] == 6)){
                    document.getElementById(i).style.background = color;
                }
            } else if (b == 3) {
                if ((temp[0] == 1 || temp[0] == 2 || temp[0] == 3) && (temp[1] == 7 || temp[1] == 8 || temp[1] == 9)){
                    document.getElementById(i).style.background = color;
                }
            } else if (b == 4) {
                if ((temp[0] == 4 || temp[0] == 5 || temp[0] == 6) && (temp[1] == 1 || temp[1] == 2 || temp[1] == 3)){
                    document.getElementById(i).style.background = color;
                }
            } else if (b == 5) {
                if ((temp[0] == 4 || temp[0] == 5 || temp[0] == 6) && (temp[1] == 4 || temp[1] == 5 || temp[1] == 6)){
                    document.getElementById(i).style.background = color;
                }
            } else if (b == 6) {
                if ((temp[0] == 4 || temp[0] == 5 || temp[0] == 6) && (temp[1] == 7 || temp[1] == 8 || temp[1] == 9)){
                    document.getElementById(i).style.background = color;
                }
            } else if (b == 7) {
                if ((temp[0] == 7 || temp[0] == 8 || temp[0] == 9) && (temp[1] == 1 || temp[1] == 2 || temp[1] == 3)){
                    document.getElementById(i).style.background = color;
                }
            } else if (b == 8) {
                if ((temp[0] == 7 || temp[0] == 8 || temp[0] == 9) && (temp[1] == 4 || temp[1] == 5 || temp[1] == 6)){
                    document.getElementById(i).style.background = color;
                }
            } else if (b == 9) {
                if ((temp[0] == 7 || temp[0] == 8 || temp[0] == 9) && (temp[1] == 7 || temp[1] == 8 || temp[1] == 9)){
                    document.getElementById(i).style.background = color;
                }
            }
        }
    }
   
} //fill block with color
 

function cBlock(r,c,b){
    if (b == 1){
        if(r>= 0 && r<3 && c>=0 && c<3)
        {
            return true;
        } else {
            return false;
        }
    } else if (b ==2) {
        if(r>= 0 && r<3 && c>2 && c<6)
        {
            return true;
        } else {
            return false;
        }
    } else if (b ==3) {
        if(r>= 0 && r<3 && c>5 && c<9)
        {
            return true;
        } else {
            return false;
        }
    } else if (b ==4) {
        if(r>2  && r<6 && c>=0 && c<3)
        {
            return true;
        } else {
            return false;
        }
    } else if (b ==5) {
        if(r> 2 && r<6 && c>2 && c<6)
        {
            return true;
        } else {
            return false;
        }
    } else if (b ==6) {
        if(r> 2 && r<6 && c>5 && c<9)
        {
            return true;
        } else {
            return false;
        }
    } else if (b ==7) {
        if(r> 5 && r<9 && c>=0 && c<3)
        {
            return true;
        } else {
            return false;
        }
    } else if (b ==8) {
        if(r> 5 && r<9 && c>2 && c<6)
        {
            return true;
        } else {
            return false;
        }
    } else if (b ==9) {
        if(r> 5 && r<9 && c>5 && c<9)
        {
            return true;
        } else {
            return false;
        }
    }
} //checks if playing in playable region


function assign(r,c){
    if (  ((r==0) || (r==3) || (r==6)) && ((c==0) || (c==3) || (c==6))   )
    {
        return 1;
    }
    if (  ((r==0) || (r==3) || (r==6)) && ((c==1) || (c==4) || (c==7))   )
    {
        return 2;
    }
    if (  ((r==0) || (r==3) || (r==6)) && ((c==2) || (c==5) || (c==8))   )
    {
        return 3;
    }
    if (  ((r==1) || (r==4) || (r==7)) && ((c==0) || (c==3) || (c==6))   )
    {
        return 4;
    }
    if (  ((r==1) || (r==4) || (r==7)) && ((c==1) || (c==4) || (c==7))   )
    {
        return 5;
    }
    if (  ((r==1) || (r==4) || (r==7)) && ((c==2) || (c==5) || (c==8))   )
    {
        return 6;
    }
    if (  ((r==2) || (r==5) || (r==8)) && ((c==0) || (c==3) || (c==6))   )
    {
        return 7;
    }
    if (  ((r==2) || (r==5) || (r==8)) && ((c==1) || (c==4) || (c==7))   )
    {
        return 8;
    }
    if (  ((r==2) || (r==5) || (r==8)) && ((c==2) || (c==5) || (c==8))   )
    {
        return 9;
    }

} //finds playable region

function update() //refresh
{
    for(var i=10; i<100; i++){
        if(!(i%10 == 0)){
            var temp = (i.toString()).split("");
            document.getElementById(i).innerHTML = board[temp[0]-1][temp[1]-1];
            
            
            
        }
    }
}



</script>






<button class = "final" onclick = "reset()"> Play Again! </button>
<p>The game consists of 9 sets of Tic-Tac-Toes. To win the game, one player must win 3 sets that make a line. A player may only play the set that is consistent with the position played by the last move. In other words, only the green region is playable.
<br>
<p>X is Yellow, O is Blue</p>
</body>
</html>
